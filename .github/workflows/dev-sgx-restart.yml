name: Dev SGX parachain

on:
  workflow_dispatch:
    inputs:
      action:
        type: choice
        description: Select the action
        options: 
        - stop
        - start
        - restart


jobs:
  action:
    runs-on: self-hosted #tee-dev

    steps:
      - name: stoping the service
        if: "${{ github.event.inputs.action == 'stop' }}"
        run: |
          sudo systemctl stop integritee.service

      - name: starting the service
        if: "${{ github.event.inputs.action == 'start' }}"
        run: |
          sudo systemctl start integritee.service

      - name: restarting the service
        if: "${{ github.event.inputs.action == 'restart' }}"
        run: |
          sudo systemctl stop integritee.service
          sleep 5
          sudo systemctl start integritee.service